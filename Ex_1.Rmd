---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 


Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

First of all, we need to read all the files.

```{r}
library(readr)
library(dplyr)
AXP <- read_csv('Data/AXP.txt', col_types = cols())
CAT <- read_csv('Data/CAT.txt', col_types = cols())
CSCO <- read_csv('Data/CSCO.txt', col_types = cols())
CVX <- read_csv('Data/CVX.txt', col_types = cols())
DD <- read_csv('Data/DD.txt', col_types = cols())
GE <- read_csv('Data/GE.txt', col_types = cols())
GS <- read_csv('Data/GS.txt', col_types = cols())
HD <- read_csv('Data/HD.txt', col_types = cols())
IBM <- read_csv('Data/IBM.txt', col_types = cols())
JNJ <- read_csv('Data/JNJ.txt', col_types = cols())
JPM <- read_csv('Data/JPM.txt', col_types = cols())
KO <- read_csv('Data/KO.txt', col_types = cols())
MCD <- read_csv('Data/MCD.txt', col_types = cols())
MMM <- read_csv('Data/MMM.txt', col_types = cols())
MSFT <- read_csv('Data/MSFT.txt', col_types = cols())
PFE <- read_csv('Data/PFE.txt', col_types = cols())
SPY <- read_csv('Data/SPY.txt', col_types = cols())
TRV <- read_csv('Data/TRV.txt', col_types = cols())
UTX <- read_csv('Data/UTX.txt', col_types = cols())
V <- read_csv('Data/V.txt', col_types = cols())
WMT <- read_csv('Data/WMT.txt', col_types = cols())
XOM <- read_csv('Data/XOM.txt', col_types = cols())
```

OK, so now we have these files, which are TOO BIG. Let's first clean the data to get it from 2000 onwards.
```{r}
clean_data <- function(ticker,flag = 0) {
  ##In this function, we're going to first convert the Date column to date:
  if(flag == 0){
     ticker$Date <- as.Date(ticker$Date, '%d/%m/%Y')
  } else{ ##This is because V.txt has month and day swapped, i know who it is 
     ticker$Date <- as.Date(ticker$Date, '%m/%d/%Y')
  }
  
  ## Then, we want to restrict it from 2000 onwards
     new_ticker <- filter(ticker, format(ticker$Date, '%Y') >= 2000)
  return(new_ticker)
}
```


```{r}
AXP <- clean_data(AXP)
testeBURRO <- list()
testeBURRO[[1]] 
```

```{r}
##Construa a matriz prum dia especÃ­fico:
A <- list()
for(d in AXP$Date){
  df1 <- filter(AXP, AXP$Date == d)
  #print(df1)
  ##mat <- matrix(c(df1$Open, df1$High, df1$Low, df$Close, df1$Volume), nrow = length(df1$Open))
  A <- list(A,df1)
}
```

